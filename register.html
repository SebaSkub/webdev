<!DOCTYPE html>
<html>
<head>
    <title>User Registration</title>
</head>
<body>
    <h2>User Registration</h2>
    <form id="registrationForm">
        <div>
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" required>
        </div>
        <div>
            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" required>
        </div>
        <div>
            <label for="dob">Date of Birth:</label>
            <input type="date" id="dob" name="dob" required>
        </div>
        <div>
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" required>
        </div>
        <div>
            <label for="lolId">League of Legends ID:</label>
            <input type="text" id="lolId" name="lolId" required>
        </div>
        <div>
            <label for="steamLink">Steam Link:</label>
            <input type="text" id="steamLink" name="steamLink" required>
        </div>
        <div>
            <label for="securityQuestion1">Security Question #1: (Random Word)</label>
            <input type="text" id="securityQuestion1" name="securityQuestion1" required>
        </div>
         <div>
            <label for="securityQuestion2">Security Question #2: (Random PIN)</label>
            <input type="text" id="securityQuestion2" name="securityQuestion2" readonly>
            <button type="button" id="generatePIN">Generate PIN</button>
        </div>


        <h3>Login Information</h3>
        <div>
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
        </div>
        <div>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div>
            <button type="submit">Register</button>
        </div>
    </form>
    <script>
        document.getElementById('generatePIN').addEventListener('click', function() {
            const securityQuestion2Input = document.getElementById('securityQuestion2');
            const randomPin = generateRandomPin();
            securityQuestion2Input.value = randomPin;
        });

        function generateRandomPin() {
            return Math.floor(1000 + Math.random() * 9000).toString();
        }
    </script>

    <script>
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                dob: document.getElementById('dob').value,
                age: document.getElementById('age').value,
                lolId: document.getElementById('lolId').value,
                steamLink: document.getElementById('steamLink').value,
                securityQuestion1: document.getElementById('securityQuestion1').value,
                securityQuestion2: document.getElementById('securityQuestion2').value,
                username: document.getElementById('username').value,
                password: document.getElementById('password').value,
            };

            fetch('/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        })
        .then(response => {
            if (response.ok) {
                window.location.href = '/it490/login.html'; // Replace with your login page URL

                // Registration successful, you can handle success here
                console.log('Registration successful');
            } else {
                // Registration failed, you can handle errors here
                console.error('Registration failed');
            }
        })
        .catch(error => {
            console.error('An error occurred:', error);
        });
        
        // Reset the form after submission
        document.getElementById('registrationForm').reset();
    });
    </script>
</body>
</html>
